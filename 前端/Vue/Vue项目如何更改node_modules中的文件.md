
#### 1. 通过命令安装 patch-package

```lua
`npm install patch-package --save-dev`
复制代码
```

#### 2. 修改项目根目录下的 package.json 文件

```go
在 package.json 文件中的 scripts 中加入 "postinstall": "patch-package"
复制代码
```

![](/Pasted%20image%2020221208182157.png)

#### 3. 手动修改 node_modules 依赖包中的源码

![](/Pasted%20image%2020221208182211.png)

#### 4. 手动执行命令创建 npx patch-package package-name 补丁文件

```java
`npx patch-package package-name`
复制代码
```

其中package-name是指要进行修改的依赖包名称。执行该命令后会在项目根目录中自动创建一个 patches 文件夹，该文件夹中就会出现一个 package-name+version.patch 的补丁文件。如图：

![](/Pasted%20image%2020221208182233.png)

举个示例：我要修改pdfjs-dist下的文件 因此我所执行的命令就是：npx patch-package pdfjs-dist

![](/Pasted%20image%2020221208182300.png)

#### 5. 测试补丁包是否有效

手动删除项目中的node_modules文件（强制删除node_modules文件夹：rimraf node_modules），并重新执行npm install命令安装node_modules依赖包。安装成功后查看你之前修改的 node_modules 依赖包中的文件，查看你修改的代码是否依然存在，如果之前修改代码依然存在即表明补丁文件已经生效，如果你之前修改的代码不存在即表明补丁文件没有生效。
  
链接：https://juejin.cn/post/7020302035207602183  